<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:a="urn:hl7-org:cql-annotations:r1">
    <identifier id="CCS_FHIR" version="1.0.0"/>
    <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
    <usings>
        <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
        <def localId="1" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="3.0.0"/>
    </usings>
    <parameters>
        <def localId="10" name="Measurement Period" accessLevel="Public">
            <default localId="9" lowClosed="true" highClosed="true" xsi:type="Interval">
                <low localId="7" xsi:type="Subtract">
                    <operand localId="5" xsi:type="Today"/>
                    <operand localId="6" value="1" unit="year" xsi:type="Quantity"/>
                </low>
                <high localId="8" xsi:type="Today"/>
            </default>
        </def>
    </parameters>
    <valueSets>
        <def localId="2" name="Absence of Cervix Value Set" id="2.16.840.1.113883.3.464.1004.1123.17" accessLevel="Public"/>
        <def localId="3" name="Cervical Cytology Value Set" id="2.16.840.1.113883.3.464.1004.1208" accessLevel="Public"/>
        <def localId="4" name="HPV Tests Value Set" id="2.16.840.1.113883.3.464.1004.1265.26" accessLevel="Public"/>
    </valueSets>
    <statements>
        <def name="Patient" context="Patient">
            <expression xsi:type="SingletonFrom">
                <operand dataType="fhir:Patient" xsi:type="Retrieve"/>
            </expression>
        </def>
        <def localId="18" name="First Predecessor Year" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="18">
                    <a:s>define &quot;First Predecessor Year&quot;:
                    </a:s>
                    <a:s r="17">
                        <a:s>Interval[</a:s>
                        <a:s r="14">
                            <a:s r="12">
                                <a:s>start of </a:s>
                                <a:s r="11">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="13">
                                <a:s>1 year</a:s>
                            </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="16">
                            <a:s>start of </a:s>
                            <a:s r="15">
                                <a:s>&quot;Measurement Period&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>)</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="17" lowClosed="true" highClosed="false" xsi:type="Interval">
                <low localId="14" xsi:type="Subtract">
                    <operand localId="12" xsi:type="Start">
                        <operand localId="11" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="13" value="1" unit="year" xsi:type="Quantity"/>
                </low>
                <high localId="16" xsi:type="Start">
                    <operand localId="15" name="Measurement Period" xsi:type="ParameterRef"/>
                </high>
            </expression>
        </def>
        <def localId="28" name="Second Predecessor Year" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="28">
                    <a:s>define &quot;Second Predecessor Year&quot;:
                    </a:s>
                    <a:s r="27">
                        <a:s>Interval[</a:s>
                        <a:s r="22">
                            <a:s r="20">
                                <a:s>start of </a:s>
                                <a:s r="19">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="21">
                                <a:s>2 years</a:s>
                            </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="26">
                            <a:s r="24">
                                <a:s>start of </a:s>
                                <a:s r="23">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="25">
                                <a:s>1 year</a:s>
                            </a:s>
                        </a:s>
                        <a:s>)</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="27" lowClosed="true" highClosed="false" xsi:type="Interval">
                <low localId="22" xsi:type="Subtract">
                    <operand localId="20" xsi:type="Start">
                        <operand localId="19" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="21" value="2" unit="years" xsi:type="Quantity"/>
                </low>
                <high localId="26" xsi:type="Subtract">
                    <operand localId="24" xsi:type="Start">
                        <operand localId="23" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="25" value="1" unit="year" xsi:type="Quantity"/>
                </high>
            </expression>
        </def>
        <def localId="40" name="Third Predecessor Quarter" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="40">
                    <a:s>define &quot;Third Predecessor Quarter&quot;:
                    </a:s>
                    <a:s r="39">
                        <a:s>Interval[</a:s>
                        <a:s r="34">
                            <a:s r="32">
                                <a:s r="30">
                                    <a:s>start of </a:s>
                                    <a:s r="29">
                                        <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s> - </a:s>
                                <a:s r="31">
                                    <a:s>2 years</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="33">
                                <a:s>3 months</a:s>
                            </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="38">
                            <a:s r="36">
                                <a:s>start of </a:s>
                                <a:s r="35">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="37">
                                <a:s>2 years</a:s>
                            </a:s>
                        </a:s>
                        <a:s>)</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="39" lowClosed="true" highClosed="false" xsi:type="Interval">
                <low localId="34" xsi:type="Subtract">
                    <operand localId="32" xsi:type="Subtract">
                        <operand localId="30" xsi:type="Start">
                            <operand localId="29" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                        <operand localId="31" value="2" unit="years" xsi:type="Quantity"/>
                    </operand>
                    <operand localId="33" value="3" unit="months" xsi:type="Quantity"/>
                </low>
                <high localId="38" xsi:type="Subtract">
                    <operand localId="36" xsi:type="Start">
                        <operand localId="35" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="37" value="2" unit="years" xsi:type="Quantity"/>
                </high>
            </expression>
        </def>
        <def localId="48" name="Lookback Interval Two More Years" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="48">
                    <a:s>define &quot;Lookback Interval Two More Years&quot;:
                    </a:s>
                    <a:s r="47">
                        <a:s>Interval[</a:s>
                        <a:s r="44">
                            <a:s r="42">
                                <a:s>start of </a:s>
                                <a:s r="41">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="43">
                                <a:s>2 years</a:s>
                            </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="46">
                            <a:s>end of </a:s>
                            <a:s r="45">
                                <a:s>&quot;Measurement Period&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>)</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="47" lowClosed="true" highClosed="false" xsi:type="Interval">
                <low localId="44" xsi:type="Subtract">
                    <operand localId="42" xsi:type="Start">
                        <operand localId="41" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="43" value="2" unit="years" xsi:type="Quantity"/>
                </low>
                <high localId="46" xsi:type="End">
                    <operand localId="45" name="Measurement Period" xsi:type="ParameterRef"/>
                </high>
            </expression>
        </def>
        <def localId="56" name="Lookback Interval Four More Years" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="56">
                    <a:s>define &quot;Lookback Interval Four More Years&quot;:
                    </a:s>
                    <a:s r="55">
                        <a:s>Interval[</a:s>
                        <a:s r="52">
                            <a:s r="50">
                                <a:s>start of </a:s>
                                <a:s r="49">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s> - </a:s>
                            <a:s r="51">
                                <a:s>4 years</a:s>
                            </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="54">
                            <a:s>end of </a:s>
                            <a:s r="53">
                                <a:s>&quot;Measurement Period&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>)</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="55" lowClosed="true" highClosed="false" xsi:type="Interval">
                <low localId="52" xsi:type="Subtract">
                    <operand localId="50" xsi:type="Start">
                        <operand localId="49" name="Measurement Period" xsi:type="ParameterRef"/>
                    </operand>
                    <operand localId="51" value="4" unit="years" xsi:type="Quantity"/>
                </low>
                <high localId="54" xsi:type="End">
                    <operand localId="53" name="Measurement Period" xsi:type="ParameterRef"/>
                </high>
            </expression>
        </def>
        <def localId="62" name="Is Female" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="62">
                    <a:s>define &quot;Is Female&quot;:
                    </a:s>
                    <a:s r="61">
                        <a:s r="59">
                            <a:s r="58">
                                <a:s r="57">
                                    <a:s>Patient</a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="58">
                                    <a:s>gender</a:s>
                                </a:s>
                            </a:s>
                            <a:s>.</a:s>
                            <a:s r="59">
                                <a:s>value</a:s>
                            </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="60">
                            <a:s>'female'</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="61" xsi:type="Equal">
                <operand localId="59" path="value" xsi:type="Property">
                    <source localId="58" path="gender" xsi:type="Property">
                        <source localId="57" name="Patient" xsi:type="ExpressionRef"/>
                    </source>
                </operand>
                <operand localId="60" valueType="t:String" value="female" xsi:type="Literal"/>
            </expression>
        </def>
        <def localId="70" name="Is Age 24 to 64 at End" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="70">
                    <a:s>define &quot;Is Age 24 to 64 at End&quot;:
                    </a:s>
                    <a:s r="69">
                        <a:s r="66">
                            <a:s>AgeInYearsAt(</a:s>
                            <a:s r="65">
                                <a:s>end of </a:s>
                                <a:s r="64">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                </a:s>
                            </a:s>
                            <a:s>)</a:s>
                        </a:s>
                        <a:s> between 24 and 64</a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="69" xsi:type="And">
                <operand xsi:type="GreaterOrEqual">
                    <operand localId="66" precision="Year" xsi:type="CalculateAgeAt">
                        <operand path="birthDate.value" xsi:type="Property">
                            <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="65" xsi:type="End">
                            <operand localId="64" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                    </operand>
                    <operand localId="67" valueType="t:Integer" value="24" xsi:type="Literal"/>
                </operand>
                <operand xsi:type="LessOrEqual">
                    <operand localId="66" precision="Year" xsi:type="CalculateAgeAt">
                        <operand path="birthDate.value" xsi:type="Property">
                            <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="65" xsi:type="End">
                            <operand localId="64" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                    </operand>
                    <operand localId="68" valueType="t:Integer" value="64" xsi:type="Literal"/>
                </operand>
            </expression>
        </def>
        <def localId="109" name="Is Hysterectomy" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="109">
                    <a:s>define &quot;Is Hysterectomy&quot;:
                    </a:s>
                    <a:s r="108">
                        <a:s>exists</a:s>
                        <a:s r="107">
                            <a:s>(
                            </a:s>
                            <a:s r="107">
                                <a:s>
                                    <a:s r="74">
                                        <a:s r="73">
                                            <a:s r="73">
                                                <a:s>[Procedure: </a:s>
                                                <a:s>
                                                    <a:s>&quot;Absence of Cervix Value Set&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> Proc</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="106">
                                    <a:s>where </a:s>
                                    <a:s r="106">
                                        <a:s r="79">
                                            <a:s r="77">
                                                <a:s r="76">
                                                    <a:s r="75">
                                                        <a:s>Proc</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="76">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="77">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="78">
                                                <a:s>'completed'</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>
                                            and </a:s>
                                        <a:s r="105">
                                            <a:s r="102">
                                                <a:s>end of </a:s>
                                                <a:s r="101">
                                                    <a:s>case </a:s>
                                                    <a:s r="91">
                                                        <a:s>when </a:s>
                                                        <a:s r="83">
                                                            <a:s r="81">
                                                                <a:s r="80">
                                                                    <a:s>Proc</a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="81">
                                                                    <a:s>performed</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s> is </a:s>
                                                            <a:s r="82">
                                                                <a:s>DateTime</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s> then </a:s>
                                                        <a:s r="90">
                                                            <a:s>Interval[</a:s>
                                                            <a:s r="86">
                                                                <a:s r="85">
                                                                    <a:s r="84">
                                                                        <a:s>Proc</a:s>
                                                                    </a:s>
                                                                    <a:s>.</a:s>
                                                                    <a:s r="85">
                                                                        <a:s>performed</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="86">
                                                                    <a:s>value</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>, </a:s>
                                                            <a:s r="89">
                                                                <a:s r="88">
                                                                    <a:s r="87">
                                                                        <a:s>Proc</a:s>
                                                                    </a:s>
                                                                    <a:s>.</a:s>
                                                                    <a:s r="88">
                                                                        <a:s>performed</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="89">
                                                                    <a:s>value</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>]</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s> else </a:s>
                                                    <a:s r="100">
                                                        <a:s>Interval[</a:s>
                                                        <a:s r="95">
                                                            <a:s r="94">
                                                                <a:s r="93">
                                                                    <a:s r="92">
                                                                        <a:s>Proc</a:s>
                                                                    </a:s>
                                                                    <a:s>.</a:s>
                                                                    <a:s r="93">
                                                                        <a:s>performed</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="94">
                                                                    <a:s>&quot;start&quot;</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="95">
                                                                <a:s>value</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>, </a:s>
                                                        <a:s r="99">
                                                            <a:s r="98">
                                                                <a:s r="97">
                                                                    <a:s r="96">
                                                                        <a:s>Proc</a:s>
                                                                    </a:s>
                                                                    <a:s>.</a:s>
                                                                    <a:s r="97">
                                                                        <a:s>performed</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>.</a:s>
                                                                <a:s r="98">
                                                                    <a:s>&quot;end&quot;</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="99">
                                                                <a:s>value</a:s>
                                                            </a:s>
                                                        </a:s>
                                                        <a:s>]</a:s>
                                                    </a:s>
                                                    <a:s> end</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> same day or before </a:s>
                                            <a:s r="104">
                                                <a:s>end of </a:s>
                                                <a:s r="103">
                                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="108" xsi:type="Exists">
                <operand localId="107" xsi:type="Query">
                    <source localId="74" alias="Proc">
                        <expression localId="73" dataType="fhir:Procedure" codeProperty="code" xsi:type="Retrieve">
                            <codes name="Absence of Cervix Value Set" xsi:type="ValueSetRef"/>
                        </expression>
                    </source>
                    <where localId="106" xsi:type="And">
                        <operand localId="79" xsi:type="Equal">
                            <operand localId="77" path="value" xsi:type="Property">
                                <source localId="76" path="status" scope="Proc" xsi:type="Property"/>
                            </operand>
                            <operand localId="78" valueType="t:String" value="completed" xsi:type="Literal"/>
                        </operand>
                        <operand localId="105" precision="Day" xsi:type="SameOrBefore">
                            <operand localId="102" xsi:type="End">
                                <operand localId="101" xsi:type="Case">
                                    <caseItem localId="91">
                                        <when localId="83" xsi:type="Is">
                                            <operand localId="81" path="performed" scope="Proc" xsi:type="Property"/>
                                            <isTypeSpecifier localId="82" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                                        </when>
                                        <then localId="90" lowClosed="true" highClosed="true" xsi:type="Interval">
                                            <low localId="86" path="value" xsi:type="Property">
                                                <source localId="85" path="performed" scope="Proc" xsi:type="Property"/>
                                            </low>
                                            <high localId="89" path="value" xsi:type="Property">
                                                <source localId="88" path="performed" scope="Proc" xsi:type="Property"/>
                                            </high>
                                        </then>
                                    </caseItem>
                                    <else localId="100" lowClosed="true" highClosed="true" xsi:type="Interval">
                                        <low localId="95" path="value" xsi:type="Property">
                                            <source localId="94" path="start" xsi:type="Property">
                                                <source localId="93" path="performed" scope="Proc" xsi:type="Property"/>
                                            </source>
                                        </low>
                                        <high localId="99" path="value" xsi:type="Property">
                                            <source localId="98" path="end" xsi:type="Property">
                                                <source localId="97" path="performed" scope="Proc" xsi:type="Property"/>
                                            </source>
                                        </high>
                                    </else>
                                </operand>
                            </operand>
                            <operand localId="104" xsi:type="End">
                                <operand localId="103" name="Measurement Period" xsi:type="ParameterRef"/>
                            </operand>
                        </operand>
                    </where>
                </operand>
            </expression>
        </def>
        <def localId="117" name="Does Patient Qualify?" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="117">
                    <a:s>define &quot;Does Patient Qualify?&quot;:
                    </a:s>
                    <a:s r="116">
                        <a:s r="72">
                            <a:s r="63">
                                <a:s>&quot;Is Female&quot;</a:s>
                            </a:s>
                            <a:s>
                                and </a:s>
                            <a:s r="71">
                                <a:s>&quot;Is Age 24 to 64 at End&quot;</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            and </a:s>
                        <a:s r="115">
                            <a:s>if </a:s>
                            <a:s r="111">
                                <a:s r="110">
                                    <a:s>&quot;Is Hysterectomy&quot;</a:s>
                                </a:s>
                                <a:s> is null</a:s>
                            </a:s>
                            <a:s>
                                then true
                                else </a:s>
                            <a:s r="114">
                                <a:s>not </a:s>
                                <a:s r="113">
                                    <a:s>&quot;Is Hysterectomy&quot;</a:s>
                                </a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="116" xsi:type="And">
                <operand localId="72" xsi:type="And">
                    <operand localId="63" name="Is Female" xsi:type="ExpressionRef"/>
                    <operand localId="71" name="Is Age 24 to 64 at End" xsi:type="ExpressionRef"/>
                </operand>
                <operand localId="115" xsi:type="If">
                    <condition asType="t:Boolean" xsi:type="As">
                        <operand localId="111" xsi:type="IsNull">
                            <operand localId="110" name="Is Hysterectomy" xsi:type="ExpressionRef"/>
                        </operand>
                        <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                    </condition>
                    <then localId="112" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                    <else localId="114" xsi:type="Not">
                        <operand localId="113" name="Is Hysterectomy" xsi:type="ExpressionRef"/>
                    </else>
                </operand>
            </expression>
        </def>
        <def localId="135" name="PeriodToIntervalOfDT" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="135">
                    <a:s>define function PeriodToIntervalOfDT(value </a:s>
                    <a:s r="127">
                        <a:s>FHIR.Period</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="134">
                        <a:s r="134">
                            <a:s>Interval[</a:s>
                            <a:s r="130">
                                <a:s r="129">
                                    <a:s r="128">
                                        <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="129">
                                        <a:s>&quot;start&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="130">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>, </a:s>
                            <a:s r="133">
                                <a:s r="132">
                                    <a:s r="131">
                                        <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="132">
                                        <a:s>&quot;end&quot;</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="133">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>]</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="134" lowClosed="true" highClosed="true" xsi:type="Interval">
                <low localId="130" path="value" xsi:type="Property">
                    <source localId="129" path="start" xsi:type="Property">
                        <source localId="128" name="value" xsi:type="OperandRef"/>
                    </source>
                </low>
                <high localId="133" path="value" xsi:type="Property">
                    <source localId="132" path="end" xsi:type="Property">
                        <source localId="131" name="value" xsi:type="OperandRef"/>
                    </source>
                </high>
            </expression>
            <operand name="value">
                <operandTypeSpecifier localId="127" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="174" name="DateTimeToInterval" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="174">
                    <a:s>define function DateTimeToInterval(date </a:s>
                    <a:s r="168">
                        <a:s>FHIR.dateTime</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="173">
                        <a:s r="173">
                            <a:s>Interval[</a:s>
                            <a:s r="170">
                                <a:s r="169">
                                    <a:s>date</a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="170">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>, </a:s>
                            <a:s r="172">
                                <a:s r="171">
                                    <a:s>date</a:s>
                                </a:s>
                                <a:s>.</a:s>
                                <a:s r="172">
                                    <a:s>value</a:s>
                                </a:s>
                            </a:s>
                            <a:s>]</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="173" lowClosed="true" highClosed="true" xsi:type="Interval">
                <low localId="170" path="value" xsi:type="Property">
                    <source localId="169" name="date" xsi:type="OperandRef"/>
                </low>
                <high localId="172" path="value" xsi:type="Property">
                    <source localId="171" name="date" xsi:type="OperandRef"/>
                </high>
            </expression>
            <operand name="date">
                <operandTypeSpecifier localId="168" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
        <def localId="179" name="Dates of Cervical Cytology Tests" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="179">
                    <a:s>define &quot;Dates of Cervical Cytology Tests&quot;:
                    </a:s>
                    <a:s r="178">
                        <a:s r="156">
                            <a:s r="138">
                                <a:s>(</a:s>
                                <a:s r="138">
                                    <a:s>
                                        <a:s r="119">
                                            <a:s r="118">
                                                <a:s r="118">
                                                    <a:s>[Procedure: </a:s>
                                                    <a:s>
                                                        <a:s>&quot;Cervical Cytology Value Set&quot;</a:s>
                                                    </a:s>
                                                    <a:s>]</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> Proc</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="124">
                                        <a:s>where </a:s>
                                        <a:s r="124">
                                            <a:s r="122">
                                                <a:s r="121">
                                                    <a:s r="120">
                                                        <a:s>Proc</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="121">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="122">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="123">
                                                <a:s>'completed'</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="137">
                                        <a:s>return </a:s>
                                        <a:s r="136">
                                            <a:s>PeriodToIntervalOfDT(</a:s>
                                            <a:s r="126">
                                                <a:s r="125">
                                                    <a:s>Proc</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="126">
                                                    <a:s>performed</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                            <a:s>
                                union
                            </a:s>
                            <a:s r="155">
                                <a:s>(</a:s>
                                <a:s r="155">
                                    <a:s>
                                        <a:s r="140">
                                            <a:s r="139">
                                                <a:s r="139">
                                                    <a:s>[DiagnosticReport: </a:s>
                                                    <a:s>
                                                        <a:s>&quot;Cervical Cytology Value Set&quot;</a:s>
                                                    </a:s>
                                                    <a:s>]</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> DiagRep</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="150">
                                        <a:s>where </a:s>
                                        <a:s r="150">
                                            <a:s r="143">
                                                <a:s r="142">
                                                    <a:s r="141">
                                                        <a:s>DiagRep</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="142">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="143">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> in </a:s>
                                            <a:s r="149">
                                                <a:s>{ </a:s>
                                                <a:s r="144">
                                                    <a:s>'preliminary'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="145">
                                                    <a:s>'final'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="146">
                                                    <a:s>'amended'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="147">
                                                    <a:s>'corrected'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="148">
                                                    <a:s>'appended'</a:s>
                                                </a:s>
                                                <a:s> }</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="154">
                                        <a:s>return </a:s>
                                        <a:s r="153">
                                            <a:s>PeriodToIntervalOfDT(</a:s>
                                            <a:s r="152">
                                                <a:s r="151">
                                                    <a:s>DiagRep</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="152">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            union
                        </a:s>
                        <a:s r="177">
                            <a:s>(</a:s>
                            <a:s r="177">
                                <a:s>
                                    <a:s r="158">
                                        <a:s r="157">
                                            <a:s r="157">
                                                <a:s>[Observation: </a:s>
                                                <a:s>
                                                    <a:s>&quot;Cervical Cytology Value Set&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> Obs</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="165">
                                    <a:s>where </a:s>
                                    <a:s r="165">
                                        <a:s r="161">
                                            <a:s r="160">
                                                <a:s r="159">
                                                    <a:s>Obs</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="160">
                                                    <a:s>status</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="161">
                                                <a:s>value</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> in </a:s>
                                        <a:s r="164">
                                            <a:s>{ </a:s>
                                            <a:s r="162">
                                                <a:s>'final'</a:s>
                                            </a:s>
                                            <a:s>, </a:s>
                                            <a:s r="163">
                                                <a:s>'amended'</a:s>
                                            </a:s>
                                            <a:s> }</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="176">
                                    <a:s>return </a:s>
                                    <a:s r="175">
                                        <a:s>DateTimeToInterval(</a:s>
                                        <a:s r="167">
                                            <a:s r="166">
                                                <a:s>Obs</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="167">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>)</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>)</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="178" xsi:type="Union">
                <operand localId="156" xsi:type="Union">
                    <operand localId="138" xsi:type="Query">
                        <source localId="119" alias="Proc">
                            <expression localId="118" dataType="fhir:Procedure" codeProperty="code" xsi:type="Retrieve">
                                <codes name="Cervical Cytology Value Set" xsi:type="ValueSetRef"/>
                            </expression>
                        </source>
                        <where localId="124" xsi:type="Equal">
                            <operand localId="122" path="value" xsi:type="Property">
                                <source localId="121" path="status" scope="Proc" xsi:type="Property"/>
                            </operand>
                            <operand localId="123" valueType="t:String" value="completed" xsi:type="Literal"/>
                        </where>
                        <return localId="137">
                            <expression localId="136" name="PeriodToIntervalOfDT" xsi:type="FunctionRef">
                                <operand asType="fhir:Period" xsi:type="As">
                                    <operand localId="126" path="performed" scope="Proc" xsi:type="Property"/>
                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </operand>
                            </expression>
                        </return>
                    </operand>
                    <operand localId="155" xsi:type="Query">
                        <source localId="140" alias="DiagRep">
                            <expression localId="139" dataType="fhir:DiagnosticReport" codeProperty="code" xsi:type="Retrieve">
                                <codes name="Cervical Cytology Value Set" xsi:type="ValueSetRef"/>
                            </expression>
                        </source>
                        <where localId="150" xsi:type="In">
                            <operand localId="143" path="value" xsi:type="Property">
                                <source localId="142" path="status" scope="DiagRep" xsi:type="Property"/>
                            </operand>
                            <operand localId="149" xsi:type="List">
                                <element localId="144" valueType="t:String" value="preliminary" xsi:type="Literal"/>
                                <element localId="145" valueType="t:String" value="final" xsi:type="Literal"/>
                                <element localId="146" valueType="t:String" value="amended" xsi:type="Literal"/>
                                <element localId="147" valueType="t:String" value="corrected" xsi:type="Literal"/>
                                <element localId="148" valueType="t:String" value="appended" xsi:type="Literal"/>
                            </operand>
                        </where>
                        <return localId="154">
                            <expression localId="153" name="PeriodToIntervalOfDT" xsi:type="FunctionRef">
                                <operand asType="fhir:Period" xsi:type="As">
                                    <operand localId="152" path="effective" scope="DiagRep" xsi:type="Property"/>
                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </operand>
                            </expression>
                        </return>
                    </operand>
                </operand>
                <operand localId="177" xsi:type="Query">
                    <source localId="158" alias="Obs">
                        <expression localId="157" dataType="fhir:Observation" codeProperty="code" xsi:type="Retrieve">
                            <codes name="Cervical Cytology Value Set" xsi:type="ValueSetRef"/>
                        </expression>
                    </source>
                    <where localId="165" xsi:type="In">
                        <operand localId="161" path="value" xsi:type="Property">
                            <source localId="160" path="status" scope="Obs" xsi:type="Property"/>
                        </operand>
                        <operand localId="164" xsi:type="List">
                            <element localId="162" valueType="t:String" value="final" xsi:type="Literal"/>
                            <element localId="163" valueType="t:String" value="amended" xsi:type="Literal"/>
                        </operand>
                    </where>
                    <return localId="176">
                        <expression localId="175" name="DateTimeToInterval" xsi:type="FunctionRef">
                            <operand asType="fhir:dateTime" xsi:type="As">
                                <operand localId="167" path="effective" scope="Obs" xsi:type="Property"/>
                                <asTypeSpecifier name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </operand>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="187" name="Is Cervical Cytology Test In Last 3 Years" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="187">
                    <a:s>define &quot;Is Cervical Cytology Test In Last 3 Years&quot;:
                    </a:s>
                    <a:s r="186">
                        <a:s>exists</a:s>
                        <a:s r="185">
                            <a:s>(
                            </a:s>
                            <a:s r="185">
                                <a:s>
                                    <a:s r="181">
                                        <a:s r="180">
                                            <a:s>
                                                <a:s>&quot;Dates of Cervical Cytology Tests&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> WhenCC</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="184">
                                    <a:s>where </a:s>
                                    <a:s r="184">
                                        <a:s r="182">
                                            <a:s>WhenCC</a:s>
                                        </a:s>
                                        <a:s> included in </a:s>
                                        <a:s r="183">
                                            <a:s>&quot;Lookback Interval Two More Years&quot;</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="186" xsi:type="Exists">
                <operand localId="185" xsi:type="Query">
                    <source localId="181" alias="WhenCC">
                        <expression localId="180" name="Dates of Cervical Cytology Tests" xsi:type="ExpressionRef"/>
                    </source>
                    <where localId="184" xsi:type="IncludedIn">
                        <operand localId="182" name="WhenCC" xsi:type="AliasRef"/>
                        <operand localId="183" name="Lookback Interval Two More Years" xsi:type="ExpressionRef"/>
                    </where>
                </operand>
            </expression>
        </def>
        <def localId="194" name="Needs Cervical Cytology Test" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="194">
                    <a:s>define &quot;Needs Cervical Cytology Test&quot;:
                    </a:s>
                    <a:s r="193">
                        <a:s>if </a:s>
                        <a:s r="189">
                            <a:s r="188">
                                <a:s>&quot;Is Cervical Cytology Test In Last 3 Years&quot;</a:s>
                            </a:s>
                            <a:s> is null</a:s>
                        </a:s>
                        <a:s>
                            then true
                            else </a:s>
                        <a:s r="192">
                            <a:s>not </a:s>
                            <a:s r="191">
                                <a:s>&quot;Is Cervical Cytology Test In Last 3 Years&quot;</a:s>
                            </a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="193" xsi:type="If">
                <condition asType="t:Boolean" xsi:type="As">
                    <operand localId="189" xsi:type="IsNull">
                        <operand localId="188" name="Is Cervical Cytology Test In Last 3 Years" xsi:type="ExpressionRef"/>
                    </operand>
                    <asTypeSpecifier name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                </condition>
                <then localId="190" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                <else localId="192" xsi:type="Not">
                    <operand localId="191" name="Is Cervical Cytology Test In Last 3 Years" xsi:type="ExpressionRef"/>
                </else>
            </expression>
        </def>
        <def localId="242" name="Dates of HPV Tests" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="242">
                    <a:s>define &quot;Dates of HPV Tests&quot;:
                    </a:s>
                    <a:s r="241">
                        <a:s r="226">
                            <a:s r="208">
                                <a:s>(</a:s>
                                <a:s r="208">
                                    <a:s>
                                        <a:s r="198">
                                            <a:s r="197">
                                                <a:s r="197">
                                                    <a:s>[Procedure: </a:s>
                                                    <a:s>
                                                        <a:s>&quot;HPV Tests Value Set&quot;</a:s>
                                                    </a:s>
                                                    <a:s>]</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> Proc</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="203">
                                        <a:s>where </a:s>
                                        <a:s r="203">
                                            <a:s r="201">
                                                <a:s r="200">
                                                    <a:s r="199">
                                                        <a:s>Proc</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="200">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="201">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> = </a:s>
                                            <a:s r="202">
                                                <a:s>'completed'</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="207">
                                        <a:s>return </a:s>
                                        <a:s r="206">
                                            <a:s>PeriodToIntervalOfDT(</a:s>
                                            <a:s r="205">
                                                <a:s r="204">
                                                    <a:s>Proc</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="205">
                                                    <a:s>performed</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                            <a:s>
                                union
                            </a:s>
                            <a:s r="225">
                                <a:s>(</a:s>
                                <a:s r="225">
                                    <a:s>
                                        <a:s r="210">
                                            <a:s r="209">
                                                <a:s r="209">
                                                    <a:s>[DiagnosticReport: </a:s>
                                                    <a:s>
                                                        <a:s>&quot;HPV Tests Value Set&quot;</a:s>
                                                    </a:s>
                                                    <a:s>]</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> DiagRep</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="220">
                                        <a:s>where </a:s>
                                        <a:s r="220">
                                            <a:s r="213">
                                                <a:s r="212">
                                                    <a:s r="211">
                                                        <a:s>DiagRep</a:s>
                                                    </a:s>
                                                    <a:s>.</a:s>
                                                    <a:s r="212">
                                                        <a:s>status</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="213">
                                                    <a:s>value</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s> in </a:s>
                                            <a:s r="219">
                                                <a:s>{ </a:s>
                                                <a:s r="214">
                                                    <a:s>'preliminary'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="215">
                                                    <a:s>'final'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="216">
                                                    <a:s>'amended'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="217">
                                                    <a:s>'corrected'</a:s>
                                                </a:s>
                                                <a:s>, </a:s>
                                                <a:s r="218">
                                                    <a:s>'appended'</a:s>
                                                </a:s>
                                                <a:s> }</a:s>
                                            </a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>
                                    </a:s>
                                    <a:s r="224">
                                        <a:s>return </a:s>
                                        <a:s r="223">
                                            <a:s>PeriodToIntervalOfDT(</a:s>
                                            <a:s r="222">
                                                <a:s r="221">
                                                    <a:s>DiagRep</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="222">
                                                    <a:s>effective</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>)</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>)</a:s>
                            </a:s>
                        </a:s>
                        <a:s>
                            union
                        </a:s>
                        <a:s r="240">
                            <a:s>(</a:s>
                            <a:s r="240">
                                <a:s>
                                    <a:s r="228">
                                        <a:s r="227">
                                            <a:s r="227">
                                                <a:s>[Observation: </a:s>
                                                <a:s>
                                                    <a:s>&quot;HPV Tests Value Set&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> Obs</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="235">
                                    <a:s>where </a:s>
                                    <a:s r="235">
                                        <a:s r="231">
                                            <a:s r="230">
                                                <a:s r="229">
                                                    <a:s>Obs</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="230">
                                                    <a:s>status</a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="231">
                                                <a:s>value</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> in </a:s>
                                        <a:s r="234">
                                            <a:s>{ </a:s>
                                            <a:s r="232">
                                                <a:s>'final'</a:s>
                                            </a:s>
                                            <a:s>, </a:s>
                                            <a:s r="233">
                                                <a:s>'amended'</a:s>
                                            </a:s>
                                            <a:s> }</a:s>
                                        </a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="239">
                                    <a:s>return </a:s>
                                    <a:s r="238">
                                        <a:s>DateTimeToInterval(</a:s>
                                        <a:s r="237">
                                            <a:s r="236">
                                                <a:s>Obs</a:s>
                                            </a:s>
                                            <a:s>.</a:s>
                                            <a:s r="237">
                                                <a:s>effective</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>)</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>)</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="241" xsi:type="Union">
                <operand localId="226" xsi:type="Union">
                    <operand localId="208" xsi:type="Query">
                        <source localId="198" alias="Proc">
                            <expression localId="197" dataType="fhir:Procedure" codeProperty="code" xsi:type="Retrieve">
                                <codes name="HPV Tests Value Set" xsi:type="ValueSetRef"/>
                            </expression>
                        </source>
                        <where localId="203" xsi:type="Equal">
                            <operand localId="201" path="value" xsi:type="Property">
                                <source localId="200" path="status" scope="Proc" xsi:type="Property"/>
                            </operand>
                            <operand localId="202" valueType="t:String" value="completed" xsi:type="Literal"/>
                        </where>
                        <return localId="207">
                            <expression localId="206" name="PeriodToIntervalOfDT" xsi:type="FunctionRef">
                                <operand asType="fhir:Period" xsi:type="As">
                                    <operand localId="205" path="performed" scope="Proc" xsi:type="Property"/>
                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </operand>
                            </expression>
                        </return>
                    </operand>
                    <operand localId="225" xsi:type="Query">
                        <source localId="210" alias="DiagRep">
                            <expression localId="209" dataType="fhir:DiagnosticReport" codeProperty="code" xsi:type="Retrieve">
                                <codes name="HPV Tests Value Set" xsi:type="ValueSetRef"/>
                            </expression>
                        </source>
                        <where localId="220" xsi:type="In">
                            <operand localId="213" path="value" xsi:type="Property">
                                <source localId="212" path="status" scope="DiagRep" xsi:type="Property"/>
                            </operand>
                            <operand localId="219" xsi:type="List">
                                <element localId="214" valueType="t:String" value="preliminary" xsi:type="Literal"/>
                                <element localId="215" valueType="t:String" value="final" xsi:type="Literal"/>
                                <element localId="216" valueType="t:String" value="amended" xsi:type="Literal"/>
                                <element localId="217" valueType="t:String" value="corrected" xsi:type="Literal"/>
                                <element localId="218" valueType="t:String" value="appended" xsi:type="Literal"/>
                            </operand>
                        </where>
                        <return localId="224">
                            <expression localId="223" name="PeriodToIntervalOfDT" xsi:type="FunctionRef">
                                <operand asType="fhir:Period" xsi:type="As">
                                    <operand localId="222" path="effective" scope="DiagRep" xsi:type="Property"/>
                                    <asTypeSpecifier name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                                </operand>
                            </expression>
                        </return>
                    </operand>
                </operand>
                <operand localId="240" xsi:type="Query">
                    <source localId="228" alias="Obs">
                        <expression localId="227" dataType="fhir:Observation" codeProperty="code" xsi:type="Retrieve">
                            <codes name="HPV Tests Value Set" xsi:type="ValueSetRef"/>
                        </expression>
                    </source>
                    <where localId="235" xsi:type="In">
                        <operand localId="231" path="value" xsi:type="Property">
                            <source localId="230" path="status" scope="Obs" xsi:type="Property"/>
                        </operand>
                        <operand localId="234" xsi:type="List">
                            <element localId="232" valueType="t:String" value="final" xsi:type="Literal"/>
                            <element localId="233" valueType="t:String" value="amended" xsi:type="Literal"/>
                        </operand>
                    </where>
                    <return localId="239">
                        <expression localId="238" name="DateTimeToInterval" xsi:type="FunctionRef">
                            <operand asType="fhir:dateTime" xsi:type="As">
                                <operand localId="237" path="effective" scope="Obs" xsi:type="Property"/>
                                <asTypeSpecifier name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                            </operand>
                        </expression>
                    </return>
                </operand>
            </expression>
        </def>
        <def localId="275" name="Is Cervical Cytology Plus HPV Test In Last 5 Years" context="Patient" accessLevel="Public">
            <annotation xsi:type="a:Annotation">
                <a:s r="275">
                    <a:s>define &quot;Is Cervical Cytology Plus HPV Test In Last 5 Years&quot;:
                    </a:s>
                    <a:s r="274">
                        <a:s>exists</a:s>
                        <a:s r="273">
                            <a:s>(
                            </a:s>
                            <a:s r="273">
                                <a:s>
                                    <a:s r="196">
                                        <a:s r="195">
                                            <a:s>
                                                <a:s>&quot;Dates of Cervical Cytology Tests&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> WhenCC</a:s>
                                    </a:s>
                                </a:s>
                                <a:s>
                                </a:s>
                                <a:s r="272">
                                    <a:s>with </a:s>
                                    <a:s r="244">
                                        <a:s r="243">
                                            <a:s>
                                                <a:s>&quot;Dates of HPV Tests&quot;</a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s> WhenHPV</a:s>
                                    </a:s>
                                    <a:s>
                                        such that </a:s>
                                    <a:s r="271">
                                        <a:s>(</a:s>
                                        <a:s r="271">
                                            <a:s r="267">
                                                <a:s r="263">
                                                    <a:s r="257">
                                                        <a:s r="251">
                                                            <a:s>(</a:s>
                                                            <a:s r="251">
                                                                <a:s r="249">
                                                                    <a:s>(</a:s>
                                                                    <a:s r="249">
                                                                        <a:s>difference in days between </a:s>
                                                                        <a:s r="246">
                                                                            <a:s>start of </a:s>
                                                                            <a:s r="245">
                                                                                <a:s>WhenCC</a:s>
                                                                            </a:s>
                                                                        </a:s>
                                                                        <a:s> and </a:s>
                                                                        <a:s r="248">
                                                                            <a:s>start of </a:s>
                                                                            <a:s r="247">
                                                                                <a:s>WhenHPV</a:s>
                                                                            </a:s>
                                                                        </a:s>
                                                                    </a:s>
                                                                    <a:s>)</a:s>
                                                                </a:s>
                                                                <a:s> &lt;= 4</a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                        <a:s>
                                                            and </a:s>
                                                        <a:s r="256">
                                                            <a:s r="254">
                                                                <a:s>AgeInYearsAt(</a:s>
                                                                <a:s r="253">
                                                                    <a:s>start of </a:s>
                                                                    <a:s r="252">
                                                                        <a:s>WhenCC</a:s>
                                                                    </a:s>
                                                                </a:s>
                                                                <a:s>)</a:s>
                                                            </a:s>
                                                            <a:s> >= 30</a:s>
                                                        </a:s>
                                                    </a:s>
                                                    <a:s>
                                                        and </a:s>
                                                    <a:s r="262">
                                                        <a:s r="260">
                                                            <a:s>AgeInYearsAt(</a:s>
                                                            <a:s r="259">
                                                                <a:s>start of </a:s>
                                                                <a:s r="258">
                                                                    <a:s>WhenHPV</a:s>
                                                                </a:s>
                                                            </a:s>
                                                            <a:s>)</a:s>
                                                        </a:s>
                                                        <a:s> >= 30</a:s>
                                                    </a:s>
                                                </a:s>
                                                <a:s>
                                                    and </a:s>
                                                <a:s r="266">
                                                    <a:s r="264">
                                                        <a:s>WhenCC</a:s>
                                                    </a:s>
                                                    <a:s> included in </a:s>
                                                    <a:s r="265">
                                                        <a:s>&quot;Lookback Interval Four More Years&quot;</a:s>
                                                    </a:s>
                                                </a:s>
                                            </a:s>
                                            <a:s>
                                                and </a:s>
                                            <a:s r="270">
                                                <a:s r="268">
                                                    <a:s>WhenHPV</a:s>
                                                </a:s>
                                                <a:s> included in </a:s>
                                                <a:s r="269">
                                                    <a:s>&quot;Lookback Interval Four More Years&quot;</a:s>
                                                </a:s>
                                            </a:s>
                                        </a:s>
                                        <a:s>)</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                )</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="274" xsi:type="Exists">
                <operand localId="273" xsi:type="Query">
                    <source localId="196" alias="WhenCC">
                        <expression localId="195" name="Dates of Cervical Cytology Tests" xsi:type="ExpressionRef"/>
                    </source>
                    <relationship localId="272" alias="WhenHPV" xsi:type="With">
                        <expression localId="243" name="Dates of HPV Tests" xsi:type="ExpressionRef"/>
                        <suchThat localId="271" xsi:type="And">
                            <operand localId="267" xsi:type="And">
                                <operand localId="263" xsi:type="And">
                                    <operand localId="257" xsi:type="And">
                                        <operand localId="251" xsi:type="LessOrEqual">
                                            <operand localId="249" precision="Day" xsi:type="DifferenceBetween">
                                                <operand localId="246" xsi:type="Start">
                                                    <operand localId="245" name="WhenCC" xsi:type="AliasRef"/>
                                                </operand>
                                                <operand localId="248" xsi:type="Start">
                                                    <operand localId="247" name="WhenHPV" xsi:type="AliasRef"/>
                                                </operand>
                                            </operand>
                                            <operand localId="250" valueType="t:Integer" value="4" xsi:type="Literal"/>
                                        </operand>
                                        <operand localId="256" xsi:type="GreaterOrEqual">
                                            <operand localId="254" precision="Year" xsi:type="CalculateAgeAt">
                                                <operand path="birthDate.value" xsi:type="Property">
                                                    <source name="Patient" xsi:type="ExpressionRef"/>
                                                </operand>
                                                <operand localId="253" xsi:type="Start">
                                                    <operand localId="252" name="WhenCC" xsi:type="AliasRef"/>
                                                </operand>
                                            </operand>
                                            <operand localId="255" valueType="t:Integer" value="30" xsi:type="Literal"/>
                                        </operand>
                                    </operand>
                                    <operand localId="262" xsi:type="GreaterOrEqual">
                                        <operand localId="260" precision="Year" xsi:type="CalculateAgeAt">
                                            <operand path="birthDate.value" xsi:type="Property">
                                                <source name="Patient" xsi:type="ExpressionRef"/>
                                            </operand>
                                            <operand localId="259" xsi:type="Start">
                                                <operand localId="258" name="WhenHPV" xsi:type="AliasRef"/>
                                            </operand>
                                        </operand>
                                        <operand localId="261" valueType="t:Integer" value="30" xsi:type="Literal"/>
                                    </operand>
                                </operand>
                                <operand localId="266" xsi:type="IncludedIn">
                                    <operand localId="264" name="WhenCC" xsi:type="AliasRef"/>
                                    <operand localId="265" name="Lookback Interval Four More Years" xsi:type="ExpressionRef"/>
                                </operand>
                            </operand>
                            <operand localId="270" xsi:type="IncludedIn">
                                <operand localId="268" name="WhenHPV" xsi:type="AliasRef"/>
                                <operand localId="269" name="Lookback Interval Four More Years" xsi:type="ExpressionRef"/>
                            </operand>
                        </suchThat>
                    </relationship>
                </operand>
            </expression>
        </def>
        <def localId="294" name="CodingToCode" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
            <annotation xsi:type="a:Annotation">
                <a:s r="294">
                    <a:s>define function CodingToCode(coding </a:s>
                    <a:s r="280">
                        <a:s>FHIR.Coding</a:s>
                    </a:s>
                    <a:s>):
                    </a:s>
                    <a:s r="293">
                        <a:s r="293">
                            <a:s>System.Code {
                            </a:s>
                            <a:s>
                                <a:s>code: </a:s>
                                <a:s r="283">
                                    <a:s r="282">
                                        <a:s r="281">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="282">
                                            <a:s>code</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="283">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>system: </a:s>
                                <a:s r="286">
                                    <a:s r="285">
                                        <a:s r="284">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="285">
                                            <a:s>system</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="286">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>version: </a:s>
                                <a:s r="289">
                                    <a:s r="288">
                                        <a:s r="287">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="288">
                                            <a:s>version</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="289">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>,
                            </a:s>
                            <a:s>
                                <a:s>display: </a:s>
                                <a:s r="292">
                                    <a:s r="291">
                                        <a:s r="290">
                                            <a:s>coding</a:s>
                                        </a:s>
                                        <a:s>.</a:s>
                                        <a:s r="291">
                                            <a:s>display</a:s>
                                        </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="292">
                                        <a:s>value</a:s>
                                    </a:s>
                                </a:s>
                            </a:s>
                            <a:s>
                                }</a:s>
                        </a:s>
                    </a:s>
                </a:s>
            </annotation>
            <expression localId="293" classType="t:Code" xsi:type="Instance">
                <element name="code">
                    <value localId="283" path="value" xsi:type="Property">
                        <source localId="282" path="code" xsi:type="Property">
                            <source localId="281" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="system">
                    <value localId="286" path="value" xsi:type="Property">
                        <source localId="285" path="system" xsi:type="Property">
                            <source localId="284" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="version">
                    <value localId="289" path="value" xsi:type="Property">
                        <source localId="288" path="version" xsi:type="Property">
                            <source localId="287" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
                <element name="display">
                    <value localId="292" path="value" xsi:type="Property">
                        <source localId="291" path="display" xsi:type="Property">
                            <source localId="290" name="coding" xsi:type="OperandRef"/>
                        </source>
                    </value>
                </element>
            </expression>
            <operand name="coding">
                <operandTypeSpecifier localId="280" name="fhir:Coding" xsi:type="NamedTypeSpecifier"/>
            </operand>
        </def>
    </statements>
</library>
